<!DOCTYPE html>
<html class="no-js" lang="en">
<head>

    <!--- basic page needs
    ================================================== -->
    <meta charset="utf-8">
    <title>Becketron Engine</title>
    <meta name="description" content="A simplistic game-engine, currently supporting OpenGL, PhysX, ImGui etc.">
    <meta name="author" content="Hamza Khan">

    <!-- mobile specific metas
    ================================================== -->
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- CSS
    ================================================== -->
    <link rel="stylesheet" href="css/vendor.css">
    <link rel="stylesheet" href="css/styles.css">

    <!-- script
    ================================================== -->
    <script src="js/modernizr.js"></script>
    <script defer src="js/fontawesome/all.min.js"></script>

    <!-- favicons
    ================================================== -->
    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="foxling-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="foxling-16x16.png">
    <link rel="manifest" href="site.webmanifest">

</head>

<body id="top">

    <!-- preloader
    ================================================== -->
    <div id="preloader"> 
    	<div id="loader"></div>
    </div>


    <!-- header
    ================================================== -->
    <header class="s-header s-header--opaque">

        <div class="s-header__logo">
            <a class="logo" href="index.html">
                <img src="images/logo.svg" alt="Homepage">
            </a>
        </div>

        <div class="row s-header__navigation">

            <nav class="s-header__nav-wrap">

                <h3 class="s-header__nav-heading h6">Navigate to</h3>

                <ul class="s-header__nav">
                    <li><a href="index.html" title="">Home</a></li>
                    <li class="has-children">
                        <a href="#0" title="">Projects</a>
                        <ul class="sub-menu">
                            <li><a href="Becketron-1.html">Game Engine</a></li>
                            <li><a href="category.html">Social-Media Webapp</a></li>
                            <li><a href="category.html">Robo-tx</a></li>
                            <li><a href="category.html">SMD Comp-Counter</a></li>
                            <li><a href="category.html">Oscilloscope CMD Sim</a></li>
                            <li><a href="category.html">R-pi Multithreading</a></li>
                            <li><a href="category.html">R-pi Pixel Mapper</a></li>
                            <li><a href="#0">PDDL Game</a></li>
                        </ul>
                    </li>
                    <li class="has-children current">
                        <a href="#0" title="">Blog</a>
                        <ul class="sub-menu">
                            <li><a href="single-video.html">Video Post</a></li>
                            <li><a href="single-audio.html">Audio Post</a></li>
                            <li><a href="single-standard.html">Standard Post</a></li>
                        </ul>
                    </li>
                    <li><a href="styles.html" title="">Styles</a></li>
                    <li><a href="about.html" title="">About</a></li>
                    <li><a href="contact.html" title="">Contact</a></li>
                </ul> <!-- end s-header__nav -->

                <a href="#0" title="Close Menu" class="s-header__overlay-close close-mobile-menu">Close</a>

            </nav> <!-- end s-header__nav-wrap -->

        </div> <!-- end s-header__navigation -->

        <a class="s-header__toggle-menu" href="#0" title="Menu"><span>Menu</span></a>

        <div class="s-header__search">

            <div class="s-header__search-inner">
                <div class="row wide">

                    <form role="search" method="get" class="s-header__search-form" action="#">
                        <label>
                            <span class="h-screen-reader-text">Search for:</span>
                            <input type="search" class="s-header__search-field" placeholder="Search for..." value="" name="s" title="Search for:" autocomplete="off">
                        </label>
                        <input type="submit" class="s-header__search-submit" value="Search"> 
                    </form>

                    <a href="#0" title="Close Search" class="s-header__overlay-close">Close</a>

                </div> <!-- end row -->
            </div> <!-- s-header__search-inner -->

        </div> <!-- end s-header__search wrap -->	

        <a class="s-header__search-trigger" href="#">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 17.982 17.983"><path fill="#010101" d="M12.622 13.611l-.209.163A7.607 7.607 0 017.7 15.399C3.454 15.399 0 11.945 0 7.7 0 3.454 3.454 0 7.7 0c4.245 0 7.699 3.454 7.699 7.7a7.613 7.613 0 01-1.626 4.714l-.163.209 4.372 4.371-.989.989-4.371-4.372zM7.7 1.399a6.307 6.307 0 00-6.3 6.3A6.307 6.307 0 007.7 14c3.473 0 6.3-2.827 6.3-6.3a6.308 6.308 0 00-6.3-6.301z"/></svg>
        </a>

    </header> <!-- end s-header -->


    <!-- content
    ================================================== -->
    <section class="s-content">

        <div class="row">
            <div class="column large-12">

                <article class="s-content__entry format-standard">

                    <div class="s-content__media">
                        <div class="s-content__post-thumb">
                            <img src="images/thumbs/Projects/Robot_Tx/Banner_1150w.jpg" 
                                 srcset="images/thumbs/Projects/Robot_Tx/Banner_2000w.jpg 2000w, 
                                         images/thumbs/Projects/Robot_Tx/Banner_1150w.jpg 1150w, 
                                         images/thumbs/Projects/Robot_Tx/Banner_525w.jpg 525w" sizes="(max-width: 1920px) 100vw, 1920px" alt="">
                        </div>
                    </div> <!-- end s-content__media -->

                    <div class="s-content__entry-header">
                        <h1 class="s-content__title s-content__title--post">Programming Fisherteknik's Robot Tx</h1>
                    </div> <!-- end s-content__entry-header -->

                    <div class="s-content__primary">

                        <div class="s-content__entry-content">

                            <p>
                                In this article, FischerTechnik’s ROBO TX model’s application to simulate an industrial robot, dedicated to simple industrial processes (e.g. Stacking), is documented. The Robot comes with its own micro controller and software but in this case Arduino’s microcontroller and software is used to control the robot.

                                The article looks at:
                                <ul>
                                <li>	 How the Robot (operating at 9V) is interfaced with Arduino microcontroller
                                     (operating at 5V). It also discusses the alternative approach for such an
                                      interface.</li>
                                <li>	Controlling all four motors of the robot via a joystick.</li>
                                <li>	Use of several different techniques to achieve accuracy of the movements
                                     since an industrial robot relies heavily on precise measured movements.</li>
                                <li>	Building a GUI for controlling the robot, using <a href="https://processing.org/">Processing software</a></li>
                                <li>	Using Serial communication for communicating with the PC-based GUI
                                    application </li>
                                <li>	Discussing alternative communication approaches</li>
                                <li>	Practical approach to the robot’s construction</li>
                                <li>	Testing different aspects of the robot’s hardware and Software and 
                                    resolving problems based on the results</li>
                                <li>	User guide to the GUI for the robot</li>
                                <li>Further augmentations that can be made to the robot and conclusions made based upon the development process </li>
                                </ul>
                                
                                 </p> 
                            
                            <h2>Background</h2>
    
                            <p>
                                With the introduction of inexpensive Programmable embedded systems such as Arduino,
                                 Raspberry Pi etc. industrial automation has boosted exponentially in smaller scale
                                  industries. With open source Software approach and huge, rapidly
                                   growing online community, the implementation of these embedded systems into 
                                   industrial application is getting cheaper and faster by the day.  
                                Most industrial robots are commonly based on heavy sensor fusion and operate on 
                                complex algorithms, the operation of which exceeds the processing power of
                                 microcontrollers (interfaced directly with the actuators). A master controller
                                  (i.e. a computer), which also acts as an HMI (Human Machine Interface) is used to
                                   control these microcontrollers using standard protocols (e.g. TCP/IP and Modbus)
                                    and to process the complex operations based on the data provided
                                    
                                    <br><br>
                                    ROBO TX’s actuators are interfaced with Arduino Uno microcontroller board
                                     (based on the 8 bit Microchip ATmega328P). It operates on a 16Mhz
                                      quartz crystal clock.

                                      <img src="images/thumbs/Projects/Robot_Tx/ATmega328P.png">
                                      <figcaption>Atmega-328P Microchip</figcaption>

                                      In the three main categories of industrial robots (i.e. <a href="https://en.wikipedia.org/wiki/Manipulator_(device)">Manipulators</a>,<a href="https://en.wikipedia.org/wiki/Mobile_industrial_robots">
                                         Mobile Robots, Mobile Manipulators</a>), ROBO TX falls in the category of
                                        Manipulators and can perform operations from a stationary position. It is a 3 axis
                                         manipulator with linear movements along the Y-Z axis and rotational movement along 
                                         the X-axis.
                            </p>

                            <h3>Robo TX Design</h3>
                            <p>
                                The operating voltage for ROBO TX is 9V and that of the Arduino board is 5V. The 
                                motors of the robot, therefore, couldn’t be controlled via the microcontroller nor 
                                can it be connected to the board while operating at 9V for the risk of damaging it.
                                 To solve this problem, an 8x Relay board is used with two individual relays dedicated to one motor 
                            </p>
                            
                            <h4>Joystick Control</h4>
                            <p>
                                <img src="images/thumbs/Projects/Robot_Tx/Joystick_connection.jpg" style="display: block;width:80%;height:80%;margin-left: auto; margin-right: auto">
                                <figcaption>Joystick connections with Arduino Pins</figcaption>
                                A joystick module is used to control the four motors of the robot, see the picture above.

                                The module uses three pins for X value, Y value and button state and two other pins
                                 connected to 5V power supply and Ground.

                                The code makes use of the ‘clockwise()’ and ‘counterClockwise()’ function to control
                                 the motors. The functions themselves control the state of the pins connected to Input pins 
                                 of the relay module.

                            </p>

                            <div class="s-content__page-content">
                            <!-- HTML generated using hilite.me --><div style="background: #ffffff; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">clockwise</span>(<span style="color: #333399; font-weight: bold">int</span> pin1,<span style="color: #333399; font-weight: bold">int</span> pin2) <span style="color: #888888">//Takes in the pin numbers</span>
{
    digitalWrite(pin2,HIGH);<span style="color: #888888">//Set relay-2n to normally closed- connected to GND</span>
    digitalWrite(pin1,LOW); <span style="color: #888888">//Set relay-1n to normally open- connected to 9V</span>
  }
  <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">counterClockwise</span>(<span style="color: #333399; font-weight: bold">int</span> pin1,<span style="color: #333399; font-weight: bold">int</span> pin2)
  {
    digitalWrite(pin1,HIGH);  <span style="color: #888888">//Set relay-1n to normally closed- connected to GND</span>
    digitalWrite(pin2,LOW); <span style="color: #888888">//Set relay-2n to normally open- connected to 9V</span>
  }
  <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">Stop</span>(<span style="color: #333399; font-weight: bold">int</span> pin1,<span style="color: #333399; font-weight: bold">int</span> pin2)
  {
    digitalWrite(pin1,HIGH);<span style="color: #888888">//Set relay-1n to normally closed- connected to GND</span>
    digitalWrite(pin2,HIGH);<span style="color: #888888">//Set relay-2n to normally closed- connected to GND</span>
  }
  </pre></div></div><br>
  <figcaption>Motor Control Functions</figcaption>
                            <!--End of section - Motor control code-->

                            <div class="s-content__page-content">
                            <!-- HTML generated using hilite.me --><div style="background: #ffffff; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">joystick</span>()
{
    xPosition <span style="color: #333333">=</span> treatValue(analogRead(xPin)); <span style="color: #888888">//Read the X-value of the joystick</span>
    yPosition <span style="color: #333333">=</span> treatValue(analogRead(yPin)); <span style="color: #888888">//Read the Y-value of the joystick</span>
    <span style="color: #888888">//  Value set to 48 to 56 using treatValue function</span>
  
  
    <span style="color: #008800; font-weight: bold">if</span>((yPosition<span style="color: #333333">==</span><span style="color: #0000DD; font-weight: bold">52</span>)<span style="color: #333333">&amp;&amp;</span>(xPosition<span style="color: #333333">==</span><span style="color: #0000DD; font-weight: bold">52</span>)) <span style="color: #888888">// Joystick&#39;s default position, Stop all motors  </span>
    {
      Stop(Ymotor1,Ymotor2);
      Stop(Zmotor1,Zmotor2);
      Stop(Rmotor1,Rmotor2);
      Stop(Gmotor1,Gmotor2);
    }
    <span style="color: #008800; font-weight: bold">else</span> <span style="color: #008800; font-weight: bold">if</span>((yPosition<span style="color: #333333">==</span><span style="color: #0000DD; font-weight: bold">56</span>)<span style="color: #333333">&amp;&amp;</span>(xPosition<span style="color: #333333">==</span><span style="color: #0000DD; font-weight: bold">52</span>)){
      counterClockwise(Ymotor1,Ymotor2); <span style="color: #888888">// Y motor counter-clockwise</span>
    }
    <span style="color: #008800; font-weight: bold">else</span> <span style="color: #008800; font-weight: bold">if</span>((yPosition<span style="color: #333333">==</span><span style="color: #0000DD; font-weight: bold">48</span>)<span style="color: #333333">&amp;&amp;</span>(xPosition<span style="color: #333333">==</span><span style="color: #0000DD; font-weight: bold">52</span>))
    {
      clockwise(Ymotor1,Ymotor2); <span style="color: #888888">// Y motor clockwise</span>
    }
    <span style="color: #008800; font-weight: bold">else</span> <span style="color: #008800; font-weight: bold">if</span>((xPosition<span style="color: #333333">==</span><span style="color: #0000DD; font-weight: bold">56</span>)<span style="color: #333333">&amp;&amp;</span>(yPosition<span style="color: #333333">==</span><span style="color: #0000DD; font-weight: bold">52</span>)){
      counterClockwise(Zmotor1,Zmotor2); <span style="color: #888888">// Z motor counter-clockwise</span>
    }
    <span style="color: #008800; font-weight: bold">else</span> <span style="color: #008800; font-weight: bold">if</span>((xPosition<span style="color: #333333">==</span><span style="color: #0000DD; font-weight: bold">48</span>)<span style="color: #333333">&amp;&amp;</span>(yPosition<span style="color: #333333">==</span><span style="color: #0000DD; font-weight: bold">52</span>))
    {
      clockwise(Zmotor1,Zmotor2); <span style="color: #888888">// Z motor clockwise</span>
    }
    <span style="color: #008800; font-weight: bold">else</span> <span style="color: #008800; font-weight: bold">if</span>((xPosition<span style="color: #333333">==</span><span style="color: #0000DD; font-weight: bold">48</span>)<span style="color: #333333">&amp;&amp;</span>(yPosition<span style="color: #333333">==</span><span style="color: #0000DD; font-weight: bold">56</span>)){ <span style="color: #888888">// R motor counter-clockwise</span>
      counterClockwise(Rmotor1,Rmotor2);
    }
    <span style="color: #008800; font-weight: bold">else</span> <span style="color: #008800; font-weight: bold">if</span>((xPosition<span style="color: #333333">==</span><span style="color: #0000DD; font-weight: bold">48</span>)<span style="color: #333333">&amp;&amp;</span>(yPosition<span style="color: #333333">==</span><span style="color: #0000DD; font-weight: bold">48</span>))
    { <span style="color: #888888">// R motor clockwise</span>
      clockwise(Rmotor1,Rmotor2); <span style="color: #888888">//open</span>
    }
    <span style="color: #008800; font-weight: bold">else</span> <span style="color: #008800; font-weight: bold">if</span>((xPosition<span style="color: #333333">==</span><span style="color: #0000DD; font-weight: bold">56</span>)<span style="color: #333333">&amp;&amp;</span>(yPosition<span style="color: #333333">==</span><span style="color: #0000DD; font-weight: bold">56</span>)){ <span style="color: #888888">// Grip close</span>
      counterClockwise(Gmotor1,Gmotor2); <span style="color: #888888">//close</span>
    }
    <span style="color: #008800; font-weight: bold">else</span> <span style="color: #008800; font-weight: bold">if</span>((xPosition<span style="color: #333333">==</span><span style="color: #0000DD; font-weight: bold">56</span>)<span style="color: #333333">&amp;&amp;</span>(yPosition<span style="color: #333333">==</span><span style="color: #0000DD; font-weight: bold">48</span>)) <span style="color: #888888">// Grip open</span>
    {
      clockwise(Gmotor1,Gmotor2);
    }
  }
  </pre></div></div><br>
<figcaption>Joystick control functions</figcaption>
                            <!--End of Section - Joystick Control Functions-->

                            <img src="images/thumbs/Projects/Robot_Tx/Joystick_guide.jpg" style="display: block;width:80%;height:80%;margin-left: auto; margin-right: auto">
                                <figcaption>Joystick user guide</figcaption>

                            <p>
                                The diagram aboves shows how to operate the robot in realtime using the joystick controls.
                                The upwards direction shown here is toward the pins that connect the joystick to the Arduino
                                microcontroller.
                            </p>

                                                    <!--Embedded Video-->
                            <div class="s-content__media">
                                <div class="s-content__post-thumb">
                                    <div class="video-container">
                                        
                                        <iframe src="https://www.youtube.com/embed/aVFugkRlGJw" width="640" height="360" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>
                                    </div>
                                    <figcaption>Demonstration of Joystick control in Robo-Tx</figcaption>
                                </div>
                            </div> <!-- end s-content__media -->

                            <h4>Achieving Movement Precision</h4>

                            <p>Techniques used for getting precise movement: 
                                <ul>
                                    <li>	Reading Pulses – Improved upon. (inaccurate)</li>
                                    <li>	<code>Delay()</code> function – Discarded (redundant)</li>
                                    <li>	Interrupts – Discarded (Not needed)</li>
                                    <li>	Debounced Pulse Reading – Best Results (slightly inaccurate)</li>
                                    <li>	Time passed using <code>micros()</code> + Debounced Pulse reading (FINAL)</p></li>
                                </ul>

                                <h5>Simple Pulse Reading</h5>
                                <img src="images/thumbs/Projects/Robot_Tx/Code/Simple_Pulse_Reading.jpg" style="display: block;width:80%;height:80%;margin-left: auto; margin-right: auto">
                                <figcaption>Simple Pulse Reading</figcaption>

                                <h5>Delay function for motor movement</h5>
                                <img src="images/thumbs/Projects/Robot_Tx/Code/Delay-function.jpg" style="display: block;width:80%;height:80%;margin-left: auto; margin-right: auto">
                                <figcaption>Delay function for Motor movement</figcaption>
                                <p>The <code>delay()</code> function does the job but is not always accurate and is redundant as it ties
                                     up 100% of the processor. While this function is running no data can be processed or
                                      changed.</p>
                                
                                <h5>Using Interrupts</h5>
                                <p>The main reason for the use of ISR(Interrupt Service Routine) was the functionality
                                     of Rising edge and Falling edge provided by it and the fact that it is run outside 
                                     main code hence providing more accuracy.

                                    The method was discarded because redundant methods like <code>delay()</code> were removed and
                                     since there was no parallel programming involved, ISR was not needed.
                                    </p>

                                <h5>Debounce Pulse Reading</h5>
                                <p>ROBO TX has two different types of motors:-  Encoder motor and XS motor. The Encoder
                                    motor sends 3 Pulses every time its turned HIGH while XS motors sends only 1. Hence
                                     the motors are debounced(i.e. In this case, reading the pulse successively within a
                                      short duration of 2-3ms) slightly differently. An XS motor’s pulse
                                       reading is done only twice.</p>
                                <img src="images/thumbs/Projects/Robot_Tx/Code/R_Encoder.jpg" style="display: block;width:80%;height:80%;margin-left: auto; margin-right: auto">
                                <figcaption>R Encoder Motor Debounced pulse reading</figcaption>

                                <p>The code above is run multiple times to get an average value of the total 
                                    time taken for different values of <code>R_sum</code> and a formula is mapped out
                                     to create a function that double checks the pulse
                                      reading with the amount of time taken. This formula is then added to the while
                                       loop (See the code below). The highlighted number is obtained by the 
                                       formula: <code> last_main_time / R_sum </code>  over different values of <code>R_sum</code> and averaging
                                        out the number.The functions for other motors are modelled in a similar fashion </p>

                            <h4>Adding Memory</h4>
                            <p>Since the robot doesn’t have any external sensor to sense its position, it must 
                                always go back to the reference position (i.e. hit the limit switches) to know where 
                                it is. This can be solved by adding variables that store the last movements value and
                                 direction. For example, the following highlighted sections are added to the 
                                 <code>void RmotMove(int)</code> function.

                                 <img src="images/thumbs/Projects/Robot_Tx/Code/Adding_Memory.jpg" style="display: block;width:80%;height:80%;margin-left: auto; margin-right: auto">
                                 <figcaption>Adding Memory To Motion</figcaption>

                                This method relies heavily on accuracy and lack of intervention through other means
                                 (e.g. joystick/GUI real time control). If an intervention occurs, the robot must be
                                  reset to reference position for this to work. 
                                </p>

                            <h4>Adding GUI</h4>
                            <p>To make the robot controllable by a user, a GUI is created using
                                <a href="https://processing.org/">Processing graphical</a>
                                 library + IDE based on JAVA.  The interactive elements to the GUI
                                 (e.g. buttons, sliders etc.) are added using the <code>ControlP5 library</code>. 

                                On hovering over the elements, an interactive dial, slider or button
                                will appear, the values of which
                                  can then be sent to the robot serially. The buttons on the bottom right
                                   can be used to control the robot in real time.
                                </p>

                                <img src="images/thumbs/Projects/Robot_Tx/Robo-Tx-GUI.jpg" style="display: block;width:80%;height:80%;margin-left: auto; margin-right: auto">
                                <figcaption>Robo-Tx GUI</figcaption>

                                <img src="images/thumbs/Projects/Robot_Tx/Robo-Tx-GUI_2.jpg" style="display: block;width:80%;height:80%;margin-left: auto; margin-right: auto">
                                 <figcaption>GUI Automation Elements</figcaption>

                                 <p>The Code below shows the initial section of the <code>setup()</code>
                                function that sets up serial communication with the arduino board, loads the background
                            image, creates all the widgets etc. The entire codebase can be found in the 
                            <a href="https://github.com/Doctor-Foxling/Programming-Robo-Tx">github repository.</a></p>
                                 <!--Begin Processing Setup code-->
                                 <div class="s-content__page-content">
                                 <!-- HTML generated using hilite.me --><div style="background: #272822; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><table><tr><td><pre style="margin: 0; line-height: 125%"><span style="color: #5b604b"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30</span></pre></td><td><pre style="margin: 0; line-height: 125%"><span style="color: #66d9ef">void</span> <span style="color: #a6e22e">setup</span><span style="color: #f92672">()</span> <span style="color: #f92672">{</span>
  <span style="color: #f8f8f2">size</span><span style="color: #f92672">(</span><span style="color: #ae81ff">1200</span><span style="color: #f92672">,</span> <span style="color: #ae81ff">815</span><span style="color: #f92672">);</span> <span style="color: #75715e">//Define the size of the application window</span>
   <span style="color: #f8f8f2">printArray</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">Serial</span><span style="color: #f92672">.</span><span style="color: #a6e22e">list</span><span style="color: #f92672">());</span> <span style="color: #75715e">// print a list of available ports</span>
  <span style="color: #f8f8f2">myPort</span> <span style="color: #f92672">=</span> <span style="color: #66d9ef">new</span> <span style="color: #f8f8f2">Serial</span><span style="color: #f92672">(</span><span style="color: #66d9ef">this</span><span style="color: #f92672">,</span> <span style="color: #f8f8f2">Serial</span><span style="color: #f92672">.</span><span style="color: #a6e22e">list</span><span style="color: #f92672">()[</span><span style="color: #ae81ff">0</span><span style="color: #f92672">],</span> <span style="color: #ae81ff">9600</span><span style="color: #f92672">);</span> <span style="color: #75715e">//Serial object for </span>
  <span style="color: #75715e">// for communicating with the port (Com04) connected with Arduino</span>
  <span style="color: #f8f8f2">photo</span><span style="color: #f92672">=</span><span style="color: #f8f8f2">loadImage</span><span style="color: #f92672">(</span><span style="color: #e6db74">&quot;Robo.jpg&quot;</span><span style="color: #f92672">);</span> <span style="color: #75715e">// PImage object to upload image</span>
  <span style="color: #f8f8f2">noStroke</span><span style="color: #f92672">();</span>  <span style="color: #75715e">// No Outline to the widgets </span>
  <span style="color: #f8f8f2">cp5</span> <span style="color: #f92672">=</span> <span style="color: #66d9ef">new</span> <span style="color: #f8f8f2">ControlP5</span><span style="color: #f92672">(</span><span style="color: #66d9ef">this</span><span style="color: #f92672">);</span> <span style="color: #75715e">// ControlP5 objects to call its functions and widgets</span>
  <span style="color: #f8f8f2">Slider_Y</span><span style="color: #f92672">=</span>   <span style="color: #f8f8f2">cp5</span><span style="color: #f92672">.</span><span style="color: #a6e22e">addSlider</span><span style="color: #f92672">(</span><span style="color: #e6db74">&quot;sliderValue&quot;</span><span style="color: #f92672">)</span> <span style="color: #75715e">// Add a ControlP5 Slider object</span>
     <span style="color: #f92672">.</span><span style="color: #a6e22e">setPosition</span><span style="color: #f92672">(</span><span style="color: #ae81ff">400</span><span style="color: #f92672">,</span><span style="color: #ae81ff">150</span><span style="color: #f92672">)</span> <span style="color: #75715e">// Set objects position</span>
     <span style="color: #f92672">.</span><span style="color: #a6e22e">setRange</span><span style="color: #f92672">(</span><span style="color: #ae81ff">0</span><span style="color: #f92672">,</span><span style="color: #ae81ff">180</span><span style="color: #f92672">)</span> <span style="color: #75715e">// Set the range of values provided by the slider</span>
     <span style="color: #f92672">.</span><span style="color: #a6e22e">setSize</span><span style="color: #f92672">(</span><span style="color: #ae81ff">150</span><span style="color: #f92672">,</span><span style="color: #ae81ff">20</span><span style="color: #f92672">)</span> <span style="color: #75715e">// Set Slider size</span>
     <span style="color: #f92672">.</span><span style="color: #a6e22e">setColorForeground</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">color</span><span style="color: #f92672">(</span><span style="color: #ae81ff">255</span><span style="color: #f92672">,</span><span style="color: #ae81ff">0</span><span style="color: #f92672">,</span><span style="color: #ae81ff">255</span><span style="color: #f92672">,</span><span style="color: #ae81ff">80</span><span style="color: #f92672">))</span><span style="color: #75715e">// Foreground colour when inactive</span>
     <span style="color: #f92672">.</span><span style="color: #a6e22e">setColorBackground</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">color</span><span style="color: #f92672">(</span><span style="color: #ae81ff">0</span><span style="color: #f92672">,</span> <span style="color: #ae81ff">160</span><span style="color: #f92672">,</span> <span style="color: #ae81ff">100</span><span style="color: #f92672">,</span><span style="color: #ae81ff">100</span><span style="color: #f92672">))</span><span style="color: #75715e">// Background colour</span>
     <span style="color: #f92672">.</span><span style="color: #a6e22e">setColorActive</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">color</span><span style="color: #f92672">(</span><span style="color: #ae81ff">255</span><span style="color: #f92672">,</span><span style="color: #ae81ff">255</span><span style="color: #f92672">,</span><span style="color: #ae81ff">0</span><span style="color: #f92672">,</span><span style="color: #ae81ff">170</span><span style="color: #f92672">))</span><span style="color: #75715e">// Foreground colour when Active (i.e. used)</span>
     <span style="color: #f92672">;</span>
    
   <span style="color: #f8f8f2">myKnobB</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">cp5</span><span style="color: #f92672">.</span><span style="color: #a6e22e">addKnob</span><span style="color: #f92672">(</span><span style="color: #e6db74">&quot;knobValue&quot;</span><span style="color: #f92672">)</span>
             <span style="color: #f92672">.</span><span style="color: #a6e22e">setRange</span><span style="color: #f92672">(</span><span style="color: #ae81ff">0</span><span style="color: #f92672">,</span><span style="color: #ae81ff">255</span><span style="color: #f92672">)</span>
             <span style="color: #f92672">.</span><span style="color: #a6e22e">setValue</span><span style="color: #f92672">(</span><span style="color: #ae81ff">0</span><span style="color: #f92672">)</span>
             <span style="color: #f92672">.</span><span style="color: #a6e22e">setPosition</span><span style="color: #f92672">(</span><span style="color: #ae81ff">134</span><span style="color: #f92672">,</span><span style="color: #ae81ff">175</span><span style="color: #f92672">)</span>
             <span style="color: #f92672">.</span><span style="color: #a6e22e">setRadius</span><span style="color: #f92672">(</span><span style="color: #ae81ff">70</span><span style="color: #f92672">)</span> 
             <span style="color: #f92672">.</span><span style="color: #a6e22e">setNumberOfTickMarks</span><span style="color: #f92672">(</span><span style="color: #ae81ff">10</span><span style="color: #f92672">)</span> <span style="color: #75715e">// Set number of tick-marks (as in a clock)</span>
             <span style="color: #f92672">.</span><span style="color: #a6e22e">setTickMarkLength</span><span style="color: #f92672">(</span><span style="color: #ae81ff">4</span><span style="color: #f92672">)</span>
             <span style="color: #f92672">.</span><span style="color: #a6e22e">snapToTickMarks</span><span style="color: #f92672">(</span><span style="color: #66d9ef">false</span><span style="color: #f92672">)</span> <span style="color: #75715e">// Whether to snap to tick marks or fluid motion</span>
             <span style="color: #f92672">.</span><span style="color: #a6e22e">setColorForeground</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">color</span><span style="color: #f92672">(</span><span style="color: #ae81ff">255</span><span style="color: #f92672">,</span><span style="color: #ae81ff">0</span><span style="color: #f92672">,</span><span style="color: #ae81ff">255</span><span style="color: #f92672">,</span><span style="color: #ae81ff">80</span><span style="color: #f92672">))</span>
             <span style="color: #f92672">.</span><span style="color: #a6e22e">setColorBackground</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">color</span><span style="color: #f92672">(</span><span style="color: #ae81ff">0</span><span style="color: #f92672">,</span> <span style="color: #ae81ff">160</span><span style="color: #f92672">,</span> <span style="color: #ae81ff">100</span><span style="color: #f92672">,</span><span style="color: #ae81ff">100</span><span style="color: #f92672">))</span>
             <span style="color: #f92672">.</span><span style="color: #a6e22e">setColorActive</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">color</span><span style="color: #f92672">(</span><span style="color: #ae81ff">255</span><span style="color: #f92672">,</span><span style="color: #ae81ff">255</span><span style="color: #f92672">,</span><span style="color: #ae81ff">0</span><span style="color: #f92672">,</span><span style="color: #ae81ff">100</span><span style="color: #f92672">))</span>
             <span style="color: #f92672">.</span><span style="color: #a6e22e">setDragDirection</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">Knob</span><span style="color: #f92672">.</span><span style="color: #a6e22e">HORIZONTAL</span><span style="color: #f92672">)</span> <span style="color: #75715e">// Direction in which to drag the dial</span>
             <span style="color: #f92672">;</span>
</pre></td></tr></table></div></div><br>
<figcaption>Opening section of the GUI's setup() function</figcaption>

                        <!--End Processing Setup Code-->

                        <p>The <code>Draw()</code> function below constantly renders the background image,
                        tracks mouse position for hover data and if the mouse hovers over one of the control
                    symbols, it render the slider, dial etc. at that location.</p>
                        <div class="s-content__page-content">
                        <!-- HTML generated using hilite.me --><div style="background: #272822; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><table><tr><td><pre style="margin: 0; line-height: 125%"><span style="color: #5b604b">1
2
3
4
5
6
7
8
9</span></pre></td><td><pre style="margin: 0; line-height: 125%"><span style="color: #66d9ef">void</span> <span style="color: #a6e22e">draw</span><span style="color: #f92672">()</span> <span style="color: #f92672">{</span>
  <span style="color: #75715e">//background(0);</span>
  <span style="color: #f8f8f2">image</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">photo</span><span style="color: #f92672">,</span> <span style="color: #ae81ff">0</span><span style="color: #f92672">,</span> <span style="color: #ae81ff">0</span><span style="color: #f92672">);</span>
  <span style="color: #f8f8f2">hover</span><span style="color: #f92672">(</span><span style="color: #ae81ff">100</span><span style="color: #f92672">,</span><span style="color: #ae81ff">135</span><span style="color: #f92672">,</span><span style="color: #ae81ff">180</span><span style="color: #f92672">,</span><span style="color: #ae81ff">210</span><span style="color: #f92672">,</span><span style="color: #ae81ff">0</span><span style="color: #f92672">);</span>
  <span style="color: #f8f8f2">hover</span><span style="color: #f92672">(</span><span style="color: #ae81ff">300</span><span style="color: #f92672">,</span><span style="color: #ae81ff">130</span><span style="color: #f92672">,</span><span style="color: #ae81ff">300</span><span style="color: #f92672">,</span><span style="color: #ae81ff">60</span><span style="color: #f92672">,</span><span style="color: #ae81ff">1</span><span style="color: #f92672">);</span>
  <span style="color: #f8f8f2">hover</span><span style="color: #f92672">(</span><span style="color: #ae81ff">170</span><span style="color: #f92672">,</span><span style="color: #ae81ff">420</span><span style="color: #f92672">,</span><span style="color: #ae81ff">100</span><span style="color: #f92672">,</span><span style="color: #ae81ff">300</span><span style="color: #f92672">,</span><span style="color: #ae81ff">2</span><span style="color: #f92672">);</span>
  <span style="color: #f8f8f2">It_appears</span><span style="color: #f92672">();</span>
  
<span style="color: #f92672">}</span>
</pre></td></tr></table></div></div><br>
<figcaption>Draw Function</figcaption>

                        <p>The video below provides a demonstration of the Graphical HMI for the robot.
                            It goes through the ability of the robot to remember its position, given no 
                            real-time control interventions are used. If the real-time controls are used,
                            the robot's position has to be reset to default for the robot to reliably 
                            remmember its last position and for the automation widgets to work as expected.
                        </p>
                        <div class="s-content__media">
                            <div class="s-content__post-thumb">
                                <div class="video-container">
                                    <!-- https://www.youtube.com/watch?v=B5yE9xGqq4s -->
                                    <iframe src="https://www.youtube.com/embed/B5yE9xGqq4s" width="640" height="360" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>
                                </div>
                                <figcaption>GUI demonstration</figcaption>
                            </div>
                        </div> <!-- end s-content__media -->

                        <h4>Serial Communication</h4>
                        <p>Serial communication is used to make the Processing GUI (running on a PC)
                        to talk to the Arduino (Controlling the robot).
                        After importing the serial library for Processing, a Serial object is created 
                        (i.e.myPort). The object set to talk to <code>COM Port 04</code>  (i.e. <code>Serial.list()[0]</code>  in this
                         case) at the baud rate <code>9600</code> which is the used in Arduino code
                    </p>
                    <div class="s-content__page-content">
                    <!-- HTML generated using hilite.me --><div style="background: #272822; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span style="color: #f8f8f2">ControlP5</span> <span style="color: #f8f8f2">cp5</span><span style="color: #f92672">;</span>
<span style="background: #8e8e8e; overflow:auto;width:auto"><span style="color: #f8f8f2">Serial</span> <span style="color: #f8f8f2">myPort</span><span style="color: #f92672"></span>;</span>
<span style="color: #66d9ef">int</span> <span style="color: #f8f8f2">myColorBackground</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">color</span><span style="color: #f92672">(</span><span style="color: #ae81ff">0</span><span style="color: #f92672">,</span> <span style="color: #ae81ff">0</span><span style="color: #f92672">,</span> <span style="color: #ae81ff">0</span><span style="color: #f92672">);</span>
<span style="color: #66d9ef">int</span> <span style="color: #f8f8f2">sld</span><span style="color: #f92672">=</span><span style="color: #ae81ff">0</span><span style="color: #f92672">;</span>
<span style="color: #66d9ef">int</span> <span style="color: #f8f8f2">R_sld</span><span style="color: #f92672">;</span>
<span style="color: #66d9ef">int</span> <span style="color: #f8f8f2">Z_sld</span><span style="color: #f92672">;</span>
<span style="color: #66d9ef">char</span><span style="color: #f92672">[]</span> <span style="color: #f8f8f2">sld_str</span><span style="color: #f92672">;</span>
<span style="color: #66d9ef">char</span><span style="color: #f92672">[]</span> <span style="color: #f8f8f2">R_sld_str</span><span style="color: #f92672">;</span>
<span style="color: #66d9ef">char</span><span style="color: #f92672">[]</span> <span style="color: #f8f8f2">Z_sld_str</span><span style="color: #f92672">;</span>
<span style="color: #66d9ef">char</span><span style="color: #f92672">[]</span> <span style="color: #f8f8f2">cv</span><span style="color: #f92672">;</span>
<span style="color: #66d9ef">boolean</span> <span style="color: #f8f8f2">mouse</span><span style="color: #f92672">[]={</span><span style="color: #66d9ef">false</span><span style="color: #f92672">,</span><span style="color: #66d9ef">false</span><span style="color: #f92672">,</span><span style="color: #66d9ef">false</span><span style="color: #f92672">,</span><span style="color: #66d9ef">false</span><span style="color: #f92672">};</span>

<span style="color: #f8f8f2">color</span><span style="color: #f92672">[]</span> <span style="color: #f8f8f2">col</span> <span style="color: #f92672">=</span> <span style="color: #66d9ef">new</span> <span style="color: #f8f8f2">color</span><span style="color: #f92672">[]</span> <span style="color: #f92672">{</span>
  <span style="color: #f8f8f2">color</span><span style="color: #f92672">(</span><span style="color: #ae81ff">100</span><span style="color: #f92672">),</span> <span style="color: #f8f8f2">color</span><span style="color: #f92672">(</span><span style="color: #ae81ff">150</span><span style="color: #f92672">),</span> <span style="color: #f8f8f2">color</span><span style="color: #f92672">(</span><span style="color: #ae81ff">200</span><span style="color: #f92672">),</span> <span style="color: #f8f8f2">color</span><span style="color: #f92672">(</span><span style="color: #ae81ff">250</span><span style="color: #f92672">)</span>
<span style="color: #f92672">};</span>
<span style="color: #66d9ef">char</span> <span style="color: #f8f8f2">dab</span><span style="color: #f92672">[]={</span><span style="color: #e6db74">&#39;a&#39;</span><span style="color: #f92672">,</span><span style="color: #e6db74">&#39;b&#39;</span><span style="color: #f92672">,</span><span style="color: #e6db74">&#39;c&#39;</span><span style="color: #f92672">,</span><span style="color: #e6db74">&#39;d&#39;</span><span style="color: #f92672">};</span>

<span style="color: #66d9ef">void</span> <span style="color: #a6e22e">setup</span><span style="color: #f92672">()</span> <span style="color: #f92672">{</span>
  <span style="color: #f8f8f2">size</span><span style="color: #f92672">(</span><span style="color: #ae81ff">1200</span><span style="color: #f92672">,</span> <span style="color: #ae81ff">815</span><span style="color: #f92672">);</span> <span style="color: #75715e">//Define the size of the application window</span>
   <span style="color: #f8f8f2">printArray</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">Serial</span><span style="color: #f92672">.</span><span style="color: #a6e22e">list</span><span style="color: #f92672">());</span> <span style="color: #75715e">// print a list of available ports</span>
<span style="background: #8e8e8e; overflow:auto;width:auto"><span style="color: #f8f8f2">myPort</span> <span style="color: #0f0d0e">=</span> <span style="color: #66d9ef">new</span> <span style="color: #f8f8f2">Serial</span><span style="color: #1d1618">(</span><span style="color: #66d9ef">this</span><span style="color: #191517">,</span> <span style="color: #f8f8f2">Serial</span><span style="color: #070506">.</span><span style="color: #a6e22e">list</span><span style="color: #0a0708">()[</span><span style="color: #6842b0">0</span><span style="color: #201519">],</span> <span style="color: #6539b5">9600</span><span style="color: #161314">)</span>;</span> <span style="color: #75715e">//Serial object for </span>
  <span style="color: #75715e">// for communicating with the port (Com04) connected with Arduino</span>
  <span style="color: #f8f8f2">photo</span><span style="color: #f92672">=</span><span style="color: #f8f8f2">loadImage</span><span style="color: #f92672">(</span><span style="color: #e6db74">&quot;Robo.jpg&quot;</span><span style="color: #f92672">);</span> <span style="color: #75715e">// PImage object to upload image</span>
  <span style="color: #f8f8f2">noStroke</span><span style="color: #f92672">();</span>  <span style="color: #75715e">// No Outline to the widgets</span>
</pre></div></div><br>
<figcaption>Code sections showing the creation of 'myPort' object</figcaption>
                        <!-- End of Serial Entry code -->

                        <div class="s-content__page-content">
                        <p>An example of the <code>myPort</code> object in use shown in the code block below</p>
                        <!-- HTML generated using hilite.me --><div style="background: #272822; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span style="color: #66d9ef">public</span> <span style="color: #66d9ef">void</span> <span style="color: #a6e22e">bangRcl</span><span style="color: #f92672">(){</span> 
  <span style="color: #f8f8f2">myPort</span><span style="color: #f92672">.</span><span style="color: #a6e22e">write</span><span style="color: #f92672">(</span><span style="color: #e6db74">&quot;R2&quot;</span><span style="color: #f92672">);</span> <span style="color: #75715e">//When button for clockwise rotation is pressed</span>
  <span style="color: #f92672">}</span><span style="color: #75715e">//Send The string &#39;R2&#39; to the serial port</span>
  <span style="color: #66d9ef">public</span> <span style="color: #66d9ef">void</span> <span style="color: #a6e22e">bangRco</span><span style="color: #f92672">(){</span>
    <span style="color: #f8f8f2">myPort</span><span style="color: #f92672">.</span><span style="color: #a6e22e">write</span><span style="color: #f92672">(</span><span style="color: #e6db74">&quot;R1&quot;</span><span style="color: #f92672">);</span><span style="color: #75715e">// &#39;1&#39; means counter clockwise</span>
  <span style="color: #f92672">}</span>
  
  <span style="color: #66d9ef">public</span> <span style="color: #66d9ef">void</span> <span style="color: #a6e22e">bangZup</span><span style="color: #f92672">(){</span>
    <span style="color: #f8f8f2">myPort</span><span style="color: #f92672">.</span><span style="color: #a6e22e">write</span><span style="color: #f92672">(</span><span style="color: #e6db74">&quot;Z2&quot;</span><span style="color: #f92672">);</span><span style="color: #75715e">// &#39;Z&#39; for Z-axis, 2 for UP</span>
  <span style="color: #f92672">}</span>
  
  <span style="color: #66d9ef">public</span> <span style="color: #66d9ef">void</span> <span style="color: #a6e22e">bangZdown</span><span style="color: #f92672">(){</span>
    <span style="color: #f8f8f2">myPort</span><span style="color: #f92672">.</span><span style="color: #a6e22e">write</span><span style="color: #f92672">(</span><span style="color: #e6db74">&quot;Z1&quot;</span><span style="color: #f92672">);</span> <span style="color: #75715e">//&#39;Z&#39; for Z-axis, 1 for DOWN</span>
  <span style="color: #f92672">}</span>
  </pre></div></div><br>
  <figcaption>An example of the 'myPort' being used</figcaption>
                            <!-- End of 'myPOrt' example  -->

                            <p>The code section below shows the functions that are called when the GUI sliders
                                or the dials are interacted with and their values are changed.
                            </p>
                            <div class="s-content__page-content">
                            <marquee behavior="scroll" direction="right" scrollamount="20" scrolldelay="0"><img src="images/thumbs/Projects/Robot_Tx/Robo-Tx-GUI_2.jpg" style="display: block;width:70%;height:70%;margin-left: auto; margin-right: auto"></marquee>

                            <!-- HTML generated using hilite.me --><div style="background: #272822; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span style="color: #66d9ef">void</span> <span style="color: #a6e22e">sliderTicks1</span><span style="color: #f92672">(</span><span style="color: #66d9ef">float</span> <span style="color: #f8f8f2">Value</span><span style="color: #f92672">)</span><span style="color: #75715e">//Called evertime slider1 value is changed</span>
<span style="color: #f92672">{</span>
    <span style="color: #f8f8f2">Z_sld</span><span style="color: #f92672">=</span><span style="color: #f8f8f2">Math</span><span style="color: #f92672">.</span><span style="color: #a6e22e">round</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">Value</span><span style="color: #f92672">);</span> <span style="color: #75715e">//Gets the value of the slider and rounds it an integer</span>
    <span style="color: #f8f8f2">println</span><span style="color: #f92672">(</span><span style="color: #e6db74">&quot;Z_sld&quot;</span><span style="color: #f92672">+</span><span style="color: #f8f8f2">Z_sld</span><span style="color: #f92672">);</span>
    <span style="color: #f8f8f2">Z_sld_str</span><span style="color: #f92672">=(</span><span style="color: #e6db74">&quot;&quot;</span><span style="color: #f92672">+</span><span style="color: #f8f8f2">Z_sld</span><span style="color: #f92672">).</span><span style="color: #a6e22e">toCharArray</span><span style="color: #f92672">();</span><span style="color: #75715e">//convert the rounded value to a Char Array</span>
    
  <span style="color: #f92672">}</span>
  
  <span style="color: #66d9ef">void</span> <span style="color: #a6e22e">sliderValue</span><span style="color: #f92672">(</span><span style="color: #66d9ef">float</span> <span style="color: #f8f8f2">theValue</span><span style="color: #f92672">)</span> <span style="color: #f92672">{</span><span style="color: #75715e">//Called evertime slider2 value is changed</span>
     <span style="color: #f8f8f2">sld</span><span style="color: #f92672">=</span><span style="color: #f8f8f2">Math</span><span style="color: #f92672">.</span><span style="color: #a6e22e">round</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">theValue</span><span style="color: #f92672">);</span><span style="color: #75715e">//Gets the value of the slider and rounds it an integer</span>
      <span style="color: #f8f8f2">println</span><span style="color: #f92672">(</span><span style="color: #e6db74">&quot;Hello&quot;</span><span style="color: #f92672">+</span><span style="color: #f8f8f2">sld</span><span style="color: #f92672">);</span>
     <span style="color: #f8f8f2">sld_str</span><span style="color: #f92672">=(</span><span style="color: #e6db74">&quot;&quot;</span><span style="color: #f92672">+</span><span style="color: #f8f8f2">sld</span><span style="color: #f92672">).</span><span style="color: #a6e22e">toCharArray</span><span style="color: #f92672">();</span><span style="color: #75715e">//convert the rounded value to a Char Array</span>
  <span style="color: #f92672">}</span>
  
  <span style="color: #66d9ef">void</span> <span style="color: #a6e22e">knobValue</span><span style="color: #f92672">(</span><span style="color: #66d9ef">float</span> <span style="color: #f8f8f2">theVal</span><span style="color: #f92672">)</span><span style="color: #75715e">//Called evertime dial1 value is changed</span>
  <span style="color: #f92672">{</span>
    <span style="color: #f8f8f2">R_sld</span><span style="color: #f92672">=</span><span style="color: #f8f8f2">Math</span><span style="color: #f92672">.</span><span style="color: #a6e22e">round</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">theVal</span><span style="color: #f92672">);</span><span style="color: #75715e">//Gets the value of the dial and rounds it an integer</span>
    <span style="color: #f8f8f2">println</span><span style="color: #f92672">(</span><span style="color: #e6db74">&quot;Yo&quot;</span><span style="color: #f92672">+</span><span style="color: #f8f8f2">R_sld</span><span style="color: #f92672">);</span>
    <span style="color: #f8f8f2">R_sld_str</span><span style="color: #f92672">=(</span><span style="color: #e6db74">&quot;&quot;</span><span style="color: #f92672">+</span><span style="color: #f8f8f2">R_sld</span><span style="color: #f92672">).</span><span style="color: #a6e22e">toCharArray</span><span style="color: #f92672">();</span><span style="color: #75715e">//convert the rounded value to a Char Array</span>
  <span style="color: #f92672">}</span>
  </pre></div></div><br>
  <figcaption>Functions called when the slider/dial value is changed respectively</figcaption>
  
                        <p>The code section below shows the function that is called when the <code>Send Data</code>
                        button is pressed. A string is created which is then appended to R, Y and Z motor's dial/slider
                        value. The string is then parsed into a character array, each character of which
                        is then sent to the Arduino microcontroller separately.
                        </p>
                        <div class="s-content__page-content">
                            <!-- HTML generated using hilite.me --><div style="background: #272822; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span style="color: #66d9ef">public</span> <span style="color: #66d9ef">void</span> <span style="color: #a6e22e">controlEvent</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">ControlEvent</span> <span style="color: #f8f8f2">theEvent</span><span style="color: #f92672">)</span> <span style="color: #f92672">{</span>

    <span style="color: #66d9ef">if</span> <span style="color: #f92672">(</span><span style="color: #f8f8f2">theEvent</span><span style="color: #f92672">.</span><span style="color: #a6e22e">getController</span><span style="color: #f92672">().</span><span style="color: #a6e22e">getName</span><span style="color: #f92672">().</span><span style="color: #a6e22e">equals</span><span style="color: #f92672">(</span><span style="color: #e6db74">&quot;bang1&quot;</span><span style="color: #f92672">))</span> 
    <span style="color: #f92672">{</span>  <span style="color: #75715e">//If &#39;Send Data&#39; button is pressed send widget values to arduino board </span>
    <span style="color: #f8f8f2">println</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">dab</span><span style="color: #f92672">[</span><span style="color: #ae81ff">0</span><span style="color: #f92672">]);</span> 
    <span style="color: #f8f8f2">println</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">sld_str</span><span style="color: #f92672">);</span> <span style="color: #75715e">// for testing purpose</span>
    <span style="color: #f8f8f2">println</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">cv</span><span style="color: #f92672">);</span> 
    <span style="color: #f8f8f2">StringBuilder</span> <span style="color: #f8f8f2">sb</span> <span style="color: #f92672">=</span> <span style="color: #66d9ef">new</span> <span style="color: #f8f8f2">StringBuilder</span><span style="color: #f92672">(</span><span style="color: #ae81ff">64</span><span style="color: #f92672">);</span> <span style="color: #75715e">// declare a String builder object</span>
    <span style="color: #75715e">// to store the widget values in a single string </span>
    <span style="color: #f8f8f2">sb</span><span style="color: #f92672">.</span><span style="color: #a6e22e">append</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">dab</span><span style="color: #f92672">[</span><span style="color: #ae81ff">0</span><span style="color: #f92672">]);</span> <span style="color: #75715e">// append a separator</span>
    <span style="color: #f8f8f2">sb</span><span style="color: #f92672">.</span><span style="color: #a6e22e">append</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">R_sld_str</span><span style="color: #f92672">);</span> <span style="color: #75715e">//append R_motor&#39;s dial value</span>
    <span style="color: #f8f8f2">sb</span><span style="color: #f92672">.</span><span style="color: #a6e22e">append</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">dab</span><span style="color: #f92672">[</span><span style="color: #ae81ff">1</span><span style="color: #f92672">]);</span> <span style="color: #75715e">//append a separator</span>
    <span style="color: #f8f8f2">sb</span><span style="color: #f92672">.</span><span style="color: #a6e22e">append</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">sld_str</span><span style="color: #f92672">);</span> <span style="color: #75715e">// append Y_motor&#39;s slider value</span>
    <span style="color: #f8f8f2">sb</span><span style="color: #f92672">.</span><span style="color: #a6e22e">append</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">dab</span><span style="color: #f92672">[</span><span style="color: #ae81ff">2</span><span style="color: #f92672">]);</span> <span style="color: #75715e">// append a separator</span>
    <span style="color: #f8f8f2">sb</span><span style="color: #f92672">.</span><span style="color: #a6e22e">append</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">Z_sld_str</span><span style="color: #f92672">);</span><span style="color: #75715e">//append Z_motor&#39;s slider value</span>
    <span style="color: #f8f8f2">cv</span><span style="color: #f92672">=</span><span style="color: #f8f8f2">sb</span><span style="color: #f92672">.</span><span style="color: #a6e22e">toString</span><span style="color: #f92672">().</span><span style="color: #a6e22e">toCharArray</span><span style="color: #f92672">();</span> <span style="color: #75715e">//put the string in a character array </span>
    <span style="color: #66d9ef">for</span><span style="color: #f92672">(</span><span style="color: #66d9ef">int</span> <span style="color: #f8f8f2">f</span><span style="color: #f92672">=</span><span style="color: #ae81ff">0</span><span style="color: #f92672">;</span><span style="color: #f8f8f2">f</span><span style="color: #f92672">&lt;</span><span style="color: #f8f8f2">cv</span><span style="color: #f92672">.</span><span style="color: #a6e22e">length</span><span style="color: #f92672">;</span><span style="color: #f8f8f2">f</span><span style="color: #f92672">++)</span> <span style="color: #75715e">// run a loop for the length of the char array</span>
    <span style="color: #f92672">{</span>
    <span style="color: #f8f8f2">myPort</span><span style="color: #f92672">.</span><span style="color: #a6e22e">write</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">cv</span><span style="color: #f92672">[</span><span style="color: #f8f8f2">f</span><span style="color: #f92672">]);</span> <span style="color: #75715e">// send each character separately to arduino</span>
    <span style="color: #f8f8f2">println</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">cv</span><span style="color: #f92672">[</span><span style="color: #f8f8f2">f</span><span style="color: #f92672">]);</span> <span style="color: #75715e">// check the values being sent, in the Console  </span>
    <span style="color: #f92672">}</span>
    <span style="color: #f92672">}</span>
  
<span style="color: #f8f8f2">println</span><span style="color: #f92672">(</span>
<span style="color: #e6db74">&quot;## controlEvent / id:&quot;</span><span style="color: #f92672">+</span><span style="color: #f8f8f2">theEvent</span><span style="color: #f92672">.</span><span style="color: #a6e22e">controller</span><span style="color: #f92672">().</span><span style="color: #a6e22e">getId</span><span style="color: #f92672">()+</span>
<span style="color: #e6db74">&quot; / name:&quot;</span><span style="color: #f92672">+</span><span style="color: #f8f8f2">theEvent</span><span style="color: #f92672">.</span><span style="color: #a6e22e">controller</span><span style="color: #f92672">().</span><span style="color: #a6e22e">getName</span><span style="color: #f92672">()+</span>
<span style="color: #e6db74">&quot; / value:&quot;</span><span style="color: #f92672">+</span><span style="color: #f8f8f2">theEvent</span><span style="color: #f92672">.</span><span style="color: #a6e22e">controller</span><span style="color: #f92672">().</span><span style="color: #a6e22e">getValue</span><span style="color: #f92672">()</span>
<span style="color: #f92672">);</span>
<span style="color: #f92672">}</span>
</pre></div></div><br>
<figcaption>Code for the 'Send Data' Button</figcaption>

                    <!-- End of code section 'Send button' -->
                    
                    <p>On the microcontroller side, the code running on the Arduino,
                    a SerialEvent() function listens to any serial data sent, from outside
                     the loop() function. If serial data is present and is a 
                     digit/alphabet, it is appended to a <code>string(ReadString)</code>.
                    See the code section below.  </p>
                    
                    <div class="s-content__page-content">
                    <!-- HTML generated using hilite.me --><div style="background: #f0f3f3; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span style="color: #006699; font-weight: bold">if</span>(ReadString.length()<span style="color: #555555">&gt;</span><span style="color: #FF6600">0</span>)
{
    <span style="color: #006699; font-weight: bold">if</span>(ReadString.length()<span style="color: #555555">==</span><span style="color: #FF6600">2</span>)
    {
      <span style="color: #007788; font-weight: bold">int</span> a;
      Serial.println(ReadString[<span style="color: #FF6600">1</span>]);
      <span style="color: #006699; font-weight: bold">switch</span>(ReadString[<span style="color: #FF6600">0</span>])
      {
        <span style="color: #006699; font-weight: bold">case</span> <span style="color: #CC3300">&#39;R&#39;</span>:
           Move_a_bit(Rmotor1,Rmotor2);
        <span style="color: #006699; font-weight: bold">break</span>;
  
        <span style="color: #006699; font-weight: bold">case</span> <span style="color: #CC3300">&#39;Z&#39;</span>:
          Move_a_bit(Zmotor1,Zmotor2);
        <span style="color: #006699; font-weight: bold">break</span>;
  
        <span style="color: #006699; font-weight: bold">case</span> <span style="color: #CC3300">&#39;Y&#39;</span>:
          Move_a_bit(Ymotor1,Ymotor2);
          <span style="color: #006699; font-weight: bold">break</span>;
  
        <span style="color: #006699; font-weight: bold">case</span> <span style="color: #CC3300">&#39;G&#39;</span>:
          Move_a_bit(Gmotor1,Gmotor2);
          <span style="color: #006699; font-weight: bold">break</span>;
      }
    }
  </pre></div></div><br>
  <figcaption>A section of Arduino code exploring the serail communication API</figcaption>
                    <!-- End of Arduino serail example 1 -->

                    <p>The code section shows a section of Arduino code dealing with the long serial data sent via 
                        the <code>SEND DATA</code> button of the GUI.

                        Various nested loops are used to check various conditions arising from 
                        the varying length of the values.
                        
                        The extracted substrings are converted into a character array, which is
                         then converted into an integer and values are passed into the respective 
                         movement functions for the motors.
                        </p>
                        <div class="s-content__page-content">
                        <!-- HTML generated using hilite.me --><div style="background: #f0f3f3; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"> <span style="color: #006699; font-weight: bold">if</span>((ReadString[<span style="color: #FF6600">3</span>]<span style="color: #555555">==</span><span style="color: #CC3300">&#39;b&#39;</span>)<span style="color: #555555">&amp;&amp;</span>(ReadString[<span style="color: #FF6600">7</span>]<span style="color: #555555">==</span><span style="color: #CC3300">&#39;c&#39;</span>))
  {
    servo1<span style="color: #555555">=</span>ReadString.substring(<span style="color: #FF6600">1</span>,<span style="color: #FF6600">3</span>);
    servo2<span style="color: #555555">=</span>ReadString.substring(<span style="color: #FF6600">4</span>,<span style="color: #FF6600">7</span>);
    servo3<span style="color: #555555">=</span>ReadString.substring(<span style="color: #FF6600">8</span>,ReadString.length());
    <span style="color: #007788; font-weight: bold">char</span> carray1[<span style="color: #FF6600">2</span>]; <span style="color: #0099FF; font-style: italic">//magic needed to convert string to a number </span>
    <span style="color: #007788; font-weight: bold">char</span> carray2[<span style="color: #FF6600">3</span>];
    <span style="color: #007788; font-weight: bold">char</span> carray3[ReadString.length()<span style="color: #555555">-</span><span style="color: #FF6600">7</span>];
    Serial.print(<span style="color: #CC3300">&quot;printing out the servo1&quot;</span>);
    Serial.println(servo1);
    Serial.println(servo2);
    servo1.toCharArray(carray1,<span style="color: #006699; font-weight: bold">sizeof</span>(carray1)<span style="color: #555555">+</span><span style="color: #FF6600">1</span>);
    servo2.toCharArray(carray2,<span style="color: #006699; font-weight: bold">sizeof</span>(carray2)<span style="color: #555555">+</span><span style="color: #FF6600">1</span>);
    servo3.toCharArray(carray3,<span style="color: #006699; font-weight: bold">sizeof</span>(carray3)<span style="color: #555555">+</span><span style="color: #FF6600">1</span>);
    Serial.print(<span style="color: #CC3300">&quot;Printing out the carray1&quot;</span>);
    Serial.println(carray1[<span style="color: #FF6600">2</span>]);
    n1 <span style="color: #555555">=</span> atoi(carray1);
    n2 <span style="color: #555555">=</span>atoi(carray2);
    n3 <span style="color: #555555">=</span>atoi(carray3); 
    Serial.print(<span style="color: #CC3300">&quot;printing out the n1&quot;</span>);
    Serial.println(n1);
    RmotMove(n1);
    YmotMove(n2);
    ZmotMove(n3);
    }
    <span style="color: #006699; font-weight: bold">else</span> <span style="color: #006699; font-weight: bold">if</span>((ReadString[<span style="color: #FF6600">3</span>]<span style="color: #555555">==</span><span style="color: #CC3300">&#39;b&#39;</span>)<span style="color: #555555">&amp;&amp;</span>(ReadString[<span style="color: #FF6600">6</span>]<span style="color: #555555">==</span><span style="color: #CC3300">&#39;c&#39;</span>))
    {
  ...
  </pre></div></div><br>
  <figcaption>A section of Arduino code dealing with serial data</figcaption>
                    <h3>Automating Stacking</h3>
                    <p>The video shows the robot being automated to stack the yellow Cylinders
                        on to the plastic shelf, without any human intervention.
                    </p>
                    <div class="s-content__media">
                        <div class="s-content__post-thumb">
                            <div class="video-container">
                                <!-- https://www.youtube.com/watch?v=KSL7ilwGIYo -->
                                <iframe src="https://www.youtube.com/embed/KSL7ilwGIYo" width="640" height="360" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>
                            </div>
                            <figcaption>Automating stacking functionality of the Robot</figcaption>
                        </div>
                    </div> <!-- end s-content__media -->
  
                    </div> <!-- end s-entry__entry-content -->

                        <div class="s-content__entry-meta">

                            <div class="entry-author meta-blk">
                                <div class="author-avatar">
                                    <img class="avatar" src="images/avatars/My_Avatar.png" alt="">
                                </div>
                                <div class="byline">
                                    <span class="bytext">Posted By</span>
                                    <a href="#0">Hamza Khan</a>
                                </div>
                            </div>

                            <div class="meta-bottom">
                                
                                <div class="entry-cat-links meta-blk">
                                    <div class="cat-links">
                                        <span>In</span> 
                                        <a href="https://en.wikipedia.org/wiki/Computer_programming">Programming</a>
                                        <a href="https://en.wikipedia.org/wiki/Software_design#:~:text=Software%20design%20is%20the%20process,components%20and%20subject%20to%20constraints.&text=%5Bin%5D%20a%20stylized%20software%20engineering,and%20planning%20a%20software%20solution.">Design</a>
                                        <a href="https://en.wikipedia.org/wiki/Game_engine">Robotics</a>
                                    </div>

                                    <span>On</span>
                                    March 6th, 2019
                                </div>

                                <div class="entry-tags meta-blk">
                                    <span class="tagtext">Tags</span>
                                    <a href="#">Fisherteknik</a>
                                    <a href="#">Arduino</a>
                                    <a href="#">Processing</a>
                                    <a href="#">Automation</a>
                                </div>

                            </div>

                        </div> <!-- s-content__entry-meta -->

                        <div class="s-content__pagenav">
                            <div class="prev-nav">
                                <a href="index.html" rel="prev">
                                    <span>Previous</span>
                                    Home 
                                </a>
                            </div>
                            <div class="next-nav">
                                <a href="Becketron-1.html" rel="next">
                                    <span>Next</span>
                                    Becketron Documentation
                                </a>
                            </div>
                         </div> <!-- end s-content__pagenav -->

                    </div> <!-- end s-content__primary -->
                </article> <!-- end entry -->

            </div> <!-- end column -->
        </div> <!-- end row -->

        <div class="row">
            <div class="column large-">
                <nav class="pgn">
                    <ul>
                        <li><a class="pgn__num current" href="Becketron-1.html">1</a></li>
                        <li>
                            <a class="pgn__next" href="Becketron_Docs/0_Documentation.html">
                                Next
                            </a>
                        </li>

                    </ul>
                    <span class="pgn__next__desc">(Becketron Documentation)</span>
                </nav> <!-- end pgn -->
            </div> <!-- end column -->
        </div> <!-- end row -->

    </section> <!-- end s-content -->


    <!-- footer
    ================================================== -->
    <footer class="s-footer">

        <div class="s-footer__main">

            <div class="row">

                <div class="column large-3 medium-6 tab-12 s-footer__info">

                    <h5>About My Site</h5>

                    <p>
                    The Website is a portfolio, showcasing some of the projects I have worked 
                    on, both, as part of my academic career as well as part of my hobby. The Website 
                    also provides documentation for some of the projects as well as some of my work 
                    as an artist.
                    </p>

                </div> <!-- end s-footer__info -->

                <div class="column large-2 medium-3 tab-6 s-footer__site-links">

                    <h5>Site Links</h5>

                    <ul>
                        <li><a href="#0">About Me</a></li>
                        <li><a href="#0">Blog</a></li>
                        <li><a href="#0">FAQ</a></li>
                        <li><a href="#0">Terms</a></li>
                        <li><a href="#0">Privacy Policy</a></li>
                    </ul>

                </div> <!-- end s-footer__site-links -->  

                <div class="column large-2 medium-3 tab-6 s-footer__social-links">

                    <h5>Follow Us</h5>

                    <ul>
                        <li><a href="https://www.linkedin.com/in/hamza-khan-b49629173/">Linkedin</a></li>
                        <li><a href="https://github.com/Doctor-Foxling">Github</a></li>
                        <li><a href="https://www.instagram.com/some_strange_dude/">Instagram</a></li>
                        <li><a href="https://www.facebook.com/Age.of.Ace/">Facebook</a></li>
                        <li><a href="https://www.youtube.com/channel/UCmvr4D0tXu9-Zy-PK_5czpw">Youtube</a></li>
                    </ul>

                </div> <!-- end s-footer__social links --> 

                <div class="column large-3 medium-6 tab-12 s-footer__subscribe">

                    <h5>Sign Up for Newsletter</h5>

                    <p>Signup to get updates on articles, interviews and events.</p>

                    <div class="subscribe-form">
                
                        <form id="mc-form" class="group" novalidate="true">

                            <input type="email" value="" name="dEmail" class="email" id="mc-email" placeholder="Your Email Address" required=""> 
                
                            <input type="submit" name="subscribe" value="subscribe" >
                
                            <label for="mc-email" class="subscribe-message"></label>
                
                        </form>

                    </div>

                </div> <!-- end s-footer__subscribe -->

            </div> <!-- end row -->

        </div> <!-- end s-footer__main -->

        <div class="s-footer__bottom">
            <div class="row">
                <div class="column">
                    <div class="ss-copyright">
                        <span>© Copyright Calvin 2020</span> 
                        <span>Design by <a href="https://www.styleshout.com/">StyleShout</a></span>
                    </div> <!-- end ss-copyright -->
                </div>
            </div> 

            <div class="ss-go-top">
                <a class="smoothscroll" title="Back to Top" href="#top">
                    <svg viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg" width="15" height="15"><path d="M7.5 1.5l.354-.354L7.5.793l-.354.353.354.354zm-.354.354l4 4 .708-.708-4-4-.708.708zm0-.708l-4 4 .708.708 4-4-.708-.708zM7 1.5V14h1V1.5H7z" fill="currentColor"></path></svg>
                </a>
            </div> <!-- end ss-go-top -->
        </div> <!-- end s-footer__bottom -->

   </footer> <!-- end s-footer -->


    <!-- Java Script
    ================================================== -->
    <script src="js/jquery-3.5.0.min.js"></script>
    <script src="js/plugins.js"></script>
    <script src="js/main.js"></script>

</body>

</html>